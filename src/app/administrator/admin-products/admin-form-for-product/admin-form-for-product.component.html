<button
    mat-icon-button
    [mat-dialog-close]="false"
    style="float: right"
    tabindex="-1"
>
    <mat-icon>close</mat-icon>
</button>

<div class="text-center h5 px-2" style="margin-top: 50px; margin-bottom: 2px">
    <span style="font-weight: bold">AGREGAR NUEVO PRODUCTO</span>
</div>

<div mat-dialog-content style="padding: 15px; color: black">
    <div class="row gap-2 mb-3">
        <div class="col-12">
            <div style="font-weight: bold">Seleccione una categoria:</div>
            <div class="hstack gap-2">
                <select
                    class="form-select form-select-sm"
                    (change)="onCategoryOptionSelectChange($event)"
                    [(ngModel)]="selectedCategoryOptionId"
                >
                    <option
                        *ngFor="let categoryOption of categoryOptionList"
                        value="{{ categoryOption.id }}"
                    >
                        <div
                            class="text-break"
                            style="
                                max-width: 100px;
                                overflow: hidden;
                                white-space: nowrap;
                                text-overflow: ellipsis;
                            "
                        >
                            {{ categoryOption.name | uppercase }}
                        </div>
                    </option>
                </select>
            </div>
        </div>

        <div class="col-12">
            <div style="font-weight: bold">Seleccione una o m√°s etiquetas:</div>
            <div class="hstack gap-2">
                <select
                    class="form-select form-select-sm"
                    [(ngModel)]="selectedCommodityOption"
                >
                    <optgroup
                        *ngFor="
                            let commodityOptionSubList of filteredCommodityOptionList
                        "
                        label="{{ commodityOptionSubList.class | uppercase }}"
                    >
                        <option
                            *ngFor="
                                let commodityOption of commodityOptionSubList.commodityOptionList
                            "
                            value="{{ commodityOption.id }}"
                        >
                            <div
                                class="text-break"
                                style="
                                    max-width: 100px;
                                    overflow: hidden;
                                    white-space: nowrap;
                                    text-overflow: ellipsis;
                                "
                            >
                                {{ commodityOption.name | uppercase }}
                            </div>
                        </option>
                    </optgroup>
                </select>
                <button
                    type="button"
                    class="btn btn-sm btn-primary"
                    (click)="onAddCommodityOptionButtonClick()"
                    [disabled]="selectedCommodityOption === undefined"
                >
                    Agregar
                </button>
            </div>
        </div>

        <div class="col-12">
            <div
                class="badge text-bg-primary py-0"
                *ngFor="let selectedCommodity of selectedCommodityOptionList"
                title="{{ selectedCommodity.name | uppercase }}"
                style="margin-right: 4px"
            >
                <div
                    class="text-break"
                    style="
                        max-width: 100px;
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                    "
                >
                    <button
                        type="button"
                        class="btn btn-sm p-0 m-0"
                        style="margin-right: 1px"
                        (click)="
                            onRemoveCommodityOptionButtonClick(selectedCommodity.id)
                        "
                    >
                        <span aria-hidden="true">&times;</span>
                    </button>
                    {{ selectedCommodity.name | uppercase }}
                </div>
            </div>
        </div>

        <div class="col-12">
            <div>Asociele un nombre</div>
            <input
                class="form-control form-control-sm"
                type="text"
                [(ngModel)]="productName"
            />
        </div>

        <div class="col-12">
            <div>Asociele una descripcion</div>
            <input
                class="form-control form-control-sm"
                type="text"
                [(ngModel)]="productDescription"
            />
        </div>
    </div>

    <div class="modal-footer justify-content-center gap-2">
        <button
            [mat-dialog-close]="result()"
            type="button"
            class="btn btn-sm btn-outline-dark"
            [disabled]="productName.trim().length === 0"
        >
            Guardar
        </button>
        <button
            [mat-dialog-close]="false"
            type="button"
            class="btn btn-sm btn-outline-dark"
        >
            Cancelar
        </button>
    </div>
</div>
